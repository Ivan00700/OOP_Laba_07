# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ07: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (NPC Arena)

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏–º—É–ª—è—Ü–∏—é NPC –Ω–∞ –∫–∞—Ä—Ç–µ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–≤–∏–∂–µ–Ω–∏—è –∏ –±–æ—ë–≤.

–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å —Ä–∞–±–æ—Ç—ã ‚Äî –æ—Ç—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤, –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ **Factory**, **Visitor**, **Observer**.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –õ–†-07 (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

*   3 –ø–æ—Ç–æ–∫–∞: –¥–≤–∏–∂–µ–Ω–∏–µ NPC (–¥–æ–≥–æ–Ω—è—é—Ç –±–ª–∏–∂–∞–π—à–µ–≥–æ), –±–æ–∏ (–æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á), –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫ –ø–µ—á–∞—Ç–∞–µ—Ç –∫–∞—Ä—Ç—É —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
*   –ë–æ–∏: –µ—Å–ª–∏ –∞—Ç–∞–∫—É—é—â–∏–π –º–æ–∂–µ—Ç —É–±–∏–≤–∞—Ç—å –∑–∞—â–∏—â–∞—é—â–µ–≥–æ—Å—è, –æ–±–∞ –±—Ä–æ—Å–∞—é—Ç d6 (–∞—Ç–∞–∫–∞/–∑–∞—â–∏—Ç–∞); –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ > –∑–∞—â–∏—Ç–∞ ‚Äî –∑–∞—â–∏—â–∞—é—â–∏–π—Å—è —É–º–∏—Ä–∞–µ—Ç
*   –ú—ë—Ä—Ç–≤—ã–µ NPC –Ω–µ –¥–≤–∏–≥–∞—é—Ç—Å—è –∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ
*   –ñ–∏–≤—ã–µ NPC –Ω–µ –≤—ã—Ö–æ–¥—è—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ä—Ç—ã 100x100
*   –°—Ç–∞—Ä—Ç: —Å–æ–∑–¥–∞—ë—Ç—Å—è 50 NPC –≤ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
*   –û—Å—Ç–∞–Ω–æ–≤–∫–∞: —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—ã–∂–∏–≤—à–∏—Ö
*   –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: `std::shared_lock`/`std::lock_guard`, –≤—ã–≤–æ–¥ –≤ `std::cout` –∑–∞—â–∏—â—ë–Ω `std::lock_guard`

## –¢–∞–±–ª–∏—Ü–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∫—Ç–æ –Ω–∞–≥–æ–Ω—è–µ—Ç)

| –ö—Ç–æ –Ω–∞–≥–æ–Ω—è–µ—Ç | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Ö–æ–¥–∞ | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ —É–±–∏–π—Å—Ç–≤–∞ |
|---|---:|---:|
| –û—Ä–∫ | 20 | 10 |
| –†–∞–∑–±–æ–π–Ω–∏–∫ (Willian) | 10 | 10 |
| –û–±–æ—Ä–æ—Ç–µ–Ω—å | 40 | 5 |

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∏ —Ç–∏–ø–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π:
1.  **Ork** (–û—Ä–∫)
2.  **Willian** (–†–∞–∑–±–æ–π–Ω–∏–∫)
3.  **Werewolf** (–û–±–æ—Ä–æ—Ç–µ–Ω—å)

### –ü—Ä–∞–≤–∏–ª–∞ —Å—Ä–∞–∂–µ–Ω–∏—è
–ë–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ NPC –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ–º –∑–∞–¥–∞–Ω–Ω–æ–º—É (`distance`).
–õ–æ–≥–∏–∫–∞ –ø–æ–±–µ–¥ (–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞):
*   **–û—Ä–∫** —É–±–∏–≤–∞–µ—Ç **–†–∞–∑–±–æ–π–Ω–∏–∫–∞**.
*   **–†–∞–∑–±–æ–π–Ω–∏–∫** —É–±–∏–≤–∞–µ—Ç **–û–±–æ—Ä–æ—Ç–Ω—è**.
*   **–û–±–æ—Ä–æ—Ç–µ–Ω—å** —É–±–∏–≤–∞–µ—Ç **–†–∞–∑–±–æ–π–Ω–∏–∫–∞**.

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ï—Å–ª–∏ –¥–≤–∞ NPC —É–±–∏–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –†–∞–∑–±–æ–π–Ω–∏–∫ –∏ –û–±–æ—Ä–æ—Ç–µ–Ω—å –ø—Ä–∏ –≤–∑–∞–∏–º–Ω–æ–π –∞—Ç–∞–∫–µ), –ø–æ–≥–∏–±–∞—é—Ç –æ–±–∞.*

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

1.  **Factory Method (–§–∞–±—Ä–∏–∫–∞)**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ NPC –ø–æ –∏—Ö —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≤–≤–æ–¥–µ —Å –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ —á—Ç–µ–Ω–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞).
    *   –ö–ª–∞—Å—Å: `Factory`.

2.  **Observer (–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å)**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π (—É–±–∏–π—Å—Ç–≤).
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–≤–∞ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è:
        *   `ConsoleObserver`: –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å.
        *   `FileObserver`: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–∞–π–ª `log.txt`.

3.  **Visitor (–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å)**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –±–æ—è (Double Dispatch).
    *   –ö–ª–∞—Å—Å `CombatVisitor` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Å—Ö–æ–¥ —Å—Ö–≤–∞—Ç–∫–∏, –∑–Ω–∞—è —Ç–∏–ø—ã –∞—Ç–∞–∫—É—é—â–µ–≥–æ –∏ –∑–∞—â–∏—â–∞—é—â–µ–≥–æ—Å—è, –Ω–µ –Ω–∞—Ä—É—à–∞—è –ø—Ä–∏–Ω—Ü–∏–ø Open-Closed –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ NPC.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
lab_7
‚îú‚îÄ‚îÄ CMakeLists.txt
‚îú‚îÄ‚îÄ main.cpp
‚îú‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ npc.h
‚îÇ   ‚îú‚îÄ‚îÄ ork.h
‚îÇ   ‚îú‚îÄ‚îÄ willian.h
‚îÇ   ‚îú‚îÄ‚îÄ werewolf.h
‚îÇ   ‚îú‚îÄ‚îÄ factory.h
‚îÇ   ‚îú‚îÄ‚îÄ arena.h
‚îÇ   ‚îú‚îÄ‚îÄ visitor.h
‚îÇ   ‚îú‚îÄ‚îÄ combat_visitor.h
‚îÇ   ‚îú‚îÄ‚îÄ observer.h
‚îÇ   ‚îú‚îÄ‚îÄ console_observer.h
‚îÇ   ‚îú‚îÄ‚îÄ file_observer.h
‚îÇ   ‚îú‚îÄ‚îÄ game.h
‚îÇ   ‚îú‚îÄ‚îÄ game_config.h
‚îÇ   ‚îî‚îÄ‚îÄ output.h
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ npc.cpp
‚îÇ   ‚îú‚îÄ‚îÄ ork.cpp
‚îÇ   ‚îú‚îÄ‚îÄ willian.cpp
‚îÇ   ‚îú‚îÄ‚îÄ werewolf.cpp
‚îÇ   ‚îú‚îÄ‚îÄ factory.cpp
‚îÇ   ‚îú‚îÄ‚îÄ arena.cpp
‚îÇ   ‚îú‚îÄ‚îÄ combat_visitor.cpp
‚îÇ   ‚îî‚îÄ‚îÄ game.cpp
‚îÇ
‚îî‚îÄ‚îÄ tests/
        ‚îî‚îÄ‚îÄ tests.cpp
```

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   C++ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ **C++17**
*   CMake –≤–µ—Ä—Å–∏–∏ 3.10 –∏–ª–∏ –≤—ã—à–µ
*   Windows / Linux / macOS

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
1.  –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Å –ø—Ä–æ–µ–∫—Ç–æ–º).
2.  –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–±–æ—Ä–∫–∏:
    ```bash
    mkdir build
    cd build
    ```
3.  –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã —Å–±–æ—Ä–∫–∏:
    ```bash
    cmake ..
    ```
4.  –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
    ```bash
    make
    ```
    *(–ò–ª–∏ `cmake --build .`)*

## –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª (—Å–∏–º—É–ª—è—Ü–∏—è –¥–ª–∏—Ç—Å—è 30 —Å–µ–∫—É–Ω–¥):
```bash
./dungeon_editor
